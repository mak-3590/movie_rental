{"ast":null,"code":"var _jsxFileName = \"/Users/apple/Desktop/movie_rental/client/src/containers/MovieRental/MovieRental.js\";\nimport React, { Component } from 'react';\nimport styles from './MovieRental.module.css';\nimport axios from 'axios';\nimport Header from '../../components/Header/Header';\nimport Movies from '../../components/Movies/Movies';\nimport Rent from '../../components/Rent/Rent';\nimport Modal from '../../components/UI/Modal/Modal';\nimport firebase from '../../Firebase';\n\nclass MovieRental extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      openModal: false,\n      currentItem: {},\n      loggedIn: false\n    };\n\n    this.addUserHandler = () => {};\n\n    this.loginHandler = () => {\n      let provider = new firebase.auth.GoogleAuthProvider();\n      firebase.auth().signInWithPopup(provider).then(function (result) {\n        let token = result.credential.accessToken;\n        let user = result.user;\n        this.setState({\n          loggedIn: true\n        });\n        console.log(user); //showUserName(user.displayName);\n        // ...\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    this.logoutHandler = () => {\n      firebase.auth().signOut().then(function () {\n        console.log(\"Logged Out\");\n        this.setState({\n          loggedIn: false\n        }); // Sign-out successful.\n      }, function (error) {// An error happened.\n      });\n    };\n\n    this.authStateChanged = () => {\n      firebase.auth().onAuthStateChanged(function (user) {\n        if (user) {\n          this.setState({\n            loggedIn: true\n          });\n          console.log(user);\n        } else {\n          this.setState({\n            loggedIn: false\n          });\n          console.log(\"Not logged in\");\n        }\n      });\n    };\n\n    this.getUserHandler = () => {\n      axios.get('http://34.230.13.18:8081/v1/user/a1234').then(resp => {\n        console.log(resp.data[0]);\n        this.setState({\n          userData: resp.data[0]\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.getMoviesHandler = () => {\n      axios.get('http://34.230.13.18:8081/v1/movies').then(resp => {\n        this.setState({\n          items: resp.data\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.modalClosed = () => {\n      console.log(\"modalClosed\");\n      let newState = { ...this.state\n      };\n      newState.openModal = false;\n      this.setState(newState);\n      this.getUserHandler();\n    };\n\n    this.rentOutHandler = item => {\n      let newState = { ...this.state\n      };\n      newState.openModal = true;\n      newState.currentItem = item;\n      console.log(newState);\n      this.setState(newState);\n    };\n  }\n\n  componentDidMount() {\n    this.getMoviesHandler();\n    this.getUserHandler();\n    this.authStateChanged();\n  }\n\n  render() {\n    let searchClasses = [];\n    searchClasses.push(\"fa\");\n    searchClasses.push(\"fa-search\");\n    let moviesList = \"\";\n    moviesList = /*#__PURE__*/React.createElement(Movies, {\n      clicked: this.rentOutHandler.bind(this),\n      items: this.state.items,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 22\n      }\n    });\n    let rentList = \"\";\n\n    if (this.state.openModal) {\n      rentList = /*#__PURE__*/React.createElement(Rent, {\n        item: this.state.currentItem,\n        closeModalClicked: this.modalClosed,\n        userData: this.state.userData,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 22\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      clicked: this.loginHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Modal, {\n      show: this.state.openModal,\n      modalClosed: this.modalClosed,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 13\n      }\n    }, rentList), moviesList);\n  }\n\n}\n\nexport default MovieRental;","map":{"version":3,"sources":["/Users/apple/Desktop/movie_rental/client/src/containers/MovieRental/MovieRental.js"],"names":["React","Component","styles","axios","Header","Movies","Rent","Modal","firebase","MovieRental","state","openModal","currentItem","loggedIn","addUserHandler","loginHandler","provider","auth","GoogleAuthProvider","signInWithPopup","then","result","token","credential","accessToken","user","setState","console","log","catch","error","logoutHandler","signOut","authStateChanged","onAuthStateChanged","getUserHandler","get","resp","data","userData","err","getMoviesHandler","items","modalClosed","newState","rentOutHandler","item","componentDidMount","render","searchClasses","push","moviesList","bind","rentList"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport styles from './MovieRental.module.css';\nimport axios from 'axios';\nimport Header from '../../components/Header/Header';\nimport Movies from '../../components/Movies/Movies';\nimport Rent from '../../components/Rent/Rent';\nimport Modal from '../../components/UI/Modal/Modal';\nimport firebase from '../../Firebase';\n\nclass MovieRental extends Component {\n\n    state = {\n        \n        openModal: false,\n        currentItem: {},\n        loggedIn: false\n    }\n\n    addUserHandler = () => {\n\n\n\n    }\n\n\n    loginHandler = () =>{\n\n      let provider = new firebase.auth.GoogleAuthProvider();\n\n      firebase.auth().signInWithPopup(provider).then(function(result) {\n        \n        let token = result.credential.accessToken;\n        let user = result.user;\n        this.setState({loggedIn:true});\n        console.log(user);\n        //showUserName(user.displayName);\n        // ...\n      }).catch(function(error) {\n          console.log(error);\n      });\n    }\n\n    logoutHandler = () => {\n\n        firebase.auth().signOut().then(function() {\n\n          console.log(\"Logged Out\");\n          this.setState({loggedIn:false});\n          // Sign-out successful.\n        }, function(error) {\n          // An error happened.\n        });\n        \n\n    }\n\n    authStateChanged = () => {\n\n          firebase.auth().onAuthStateChanged(function(user) {\n            if(user){\n              this.setState({loggedIn:true});\n              console.log(user);\n            \n            }else{\n              this.setState({loggedIn:false});\n              console.log(\"Not logged in\")\n              \n            }\n\n        });\n\n    }\n\n\n    componentDidMount(){\n        \n        this.getMoviesHandler();\n        this.getUserHandler();\n        this.authStateChanged();\n          \n      }\n\n      getUserHandler = () =>{\n\n          axios.get('http://34.230.13.18:8081/v1/user/a1234')\n          .then((resp) => {\n              \n              console.log(resp.data[0]);\n\n              this.setState({userData: resp.data[0]});\n\n          })\n          .catch((err) => {\n            console.log(err);\n          });\n\n\n      }\n\n\n      getMoviesHandler = () => {\n\n          axios.get('http://34.230.13.18:8081/v1/movies')\n          .then((resp) => {\n            this.setState({items: resp.data});\n          })\n          .catch((err) => {\n            console.log(err);\n          });\n\n      }\n\n\n      modalClosed = () => {\n\n        console.log(\"modalClosed\");\n        let newState = {...this.state};\n        newState.openModal = false;\n        this.setState(newState);\n\n        this.getUserHandler();\n\n      }\n\n      rentOutHandler = (item)=>{\n        let newState = {...this.state};\n        newState.openModal = true;\n        newState.currentItem = item;\n        console.log(newState);\n        this.setState(newState);\n      }\n\n\n\n    \n    render (){\n\n        let searchClasses = [];\n        searchClasses.push(\"fa\");\n        searchClasses.push(\"fa-search\");\n\n        let moviesList = \"\";\n\n        moviesList = <Movies \n                      clicked={this.rentOutHandler.bind(this)}\n                      items={this.state.items}\n\n                    />;\n        let rentList = \"\";\n\n        if(this.state.openModal){\n          rentList = <Rent \n                        item={this.state.currentItem}\n                        closeModalClicked={this.modalClosed}\n                        userData={this.state.userData}\n                      />;   \n\n        }\n\n        return (\n            <div>\n            <Header \n                clicked={this.loginHandler}/>\n            <Modal\n                show={this.state.openModal}\n                modalClosed={this.modalClosed}\n            >\n              {rentList}\n            </Modal>\n              {moviesList}\n            </div>\n           \n            \n\n        )\n\n    }\n\n}\n\nexport default MovieRental;"]},"metadata":{},"sourceType":"module"}