{"ast":null,"code":"var _jsxFileName = \"/Users/apple/Desktop/movie_rental/client/src/containers/MovieRental/MovieRental.js\";\nimport React, { Component } from 'react';\nimport styles from './MovieRental.module.css';\nimport axios from 'axios';\nimport Header from '../../components/Header/Header';\nimport Movies from '../../components/Movies/Movies';\nimport Rent from '../../components/Rent/Rent';\nimport Modal from '../../components/UI/Modal/Modal';\nimport firebase from '../../Firebase';\n\nclass MovieRental extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      openModal: false,\n      currentItem: {},\n      loggedIn: false,\n      userData: {},\n      orderDone: false\n    };\n\n    this.addUserHandler = (id, name, email_id) => {\n      var data = new FormData();\n      data.append('id', id);\n      data.append('name', name);\n      data.append('email_id', email_id);\n      axios.post('http://34.230.13.18:8081/v1/users', data).then(resp => {\n        if (resp.data.inserted === 1) {\n          let newState = { ...this.state\n          };\n          newState.loggedIn = true;\n          newState.userData = {\n            id: id,\n            name: name,\n            email_id: email_id,\n            points: 0\n          };\n          this.setState(newState);\n        } else {\n          const data = resp.data.data[0];\n          let newState = { ...this.state\n          };\n          newState.loggedIn = true;\n          newState.userData = {\n            id: data.id,\n            name: data.name,\n            email_id: data.email_id,\n            points: data.points\n          };\n          this.setState(newState);\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.loginHandler = () => {\n      const state = this;\n      let provider = new firebase.auth.GoogleAuthProvider();\n      firebase.auth().signInWithPopup(provider).then(function (result) {\n        const token = result.credential.accessToken;\n        const user = result.user;\n        const id = user.uid;\n        const name = user.displayName;\n        const email_id = user.email;\n        state.addUserHandler(id, name, email_id);\n        state.setState({\n          loggedIn: true\n        });\n        ; // ...\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    this.logoutHandler = () => {\n      const state = this;\n      firebase.auth().signOut().then(function () {\n        console.log(\"Logged Out\");\n        state.setState({\n          loggedIn: false,\n          userData: {}\n        }); // Sign-out successful.\n      }, function (error) {\n        console.log(error); // An error happened.\n      });\n    };\n\n    this.authStateChanged = () => {\n      const state = this;\n      firebase.auth().onAuthStateChanged(function (user) {\n        if (user) {\n          state.setState({\n            loggedIn: true\n          });\n          state.getUserHandler(user.uid);\n        } else {\n          state.setState({\n            loggedIn: false\n          });\n          console.log(\"Not logged in\");\n        }\n      });\n    };\n\n    this.getUserHandler = id => {\n      axios.get('http://34.230.13.18:8081/v1/user/' + id).then(resp => {\n        this.setState({\n          userData: resp.data[0]\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.getMoviesHandler = () => {\n      axios.get('http://34.230.13.18:8081/v1/movies').then(resp => {\n        this.setState({\n          items: resp.data\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.modalClosed = () => {\n      console.log(\"modalClosed\");\n      let newState = { ...this.state\n      };\n      newState.openModal = false;\n      this.setState(newState);\n      this.getUserHandler(this.state.userData.id);\n    };\n\n    this.rentOutHandler = item => {\n      let newState = { ...this.state\n      };\n\n      if (!newState.loggedIn) {\n        alert(\"Please Login\");\n      } else {\n        newState.openModal = true;\n        newState.currentItem = item;\n        console.log(newState);\n        this.setState(newState);\n      }\n    };\n\n    this.orderDoneHandler = id => {\n      let newState = { ...this.state\n      };\n      let items = newState.items.data;\n      console.log(items.length);\n      items.forEach((item, index, object) => {\n        if (item.id === id) {\n          object.splice(index, 1);\n        }\n      });\n      newState.items.data = items;\n      newState.orderDone = true;\n      this.setState(newState);\n    };\n  }\n\n  componentDidMount() {\n    this.getMoviesHandler(); //this.logoutHandler();\n\n    this.authStateChanged();\n    this.setState({\n      orderDone: false\n    });\n  }\n\n  render() {\n    let searchClasses = [];\n    searchClasses.push(\"fa\");\n    searchClasses.push(\"fa-search\");\n    /*let moviesList = <Movies \n                        clicked={this.rentOutHandler.bind(this)}\n                        items={this.state.items}\n                      />;*/\n\n    if (this.state.orderDone) {\n      moviesList = /*#__PURE__*/React.createElement(Movies, {\n        clicked: this.rentOutHandler.bind(this),\n        items: this.state.items,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 26\n        }\n      });\n    }\n\n    let rentList = \"\";\n\n    if (this.state.openModal) {\n      rentList = /*#__PURE__*/React.createElement(Rent, {\n        item: this.state.currentItem,\n        closeModalClicked: this.modalClosed,\n        orderDoneClicked: this.orderDoneHandler,\n        userData: this.state.userData,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 22\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      loggedIn: this.state.loggedIn,\n      name: this.state.userData.name,\n      logoutClicked: this.logoutHandler,\n      loginClicked: this.loginHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Modal, {\n      show: this.state.openModal,\n      modalClosed: this.modalClosed,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 13\n      }\n    }, rentList), moviesList);\n  }\n\n}\n\nexport default MovieRental;","map":{"version":3,"sources":["/Users/apple/Desktop/movie_rental/client/src/containers/MovieRental/MovieRental.js"],"names":["React","Component","styles","axios","Header","Movies","Rent","Modal","firebase","MovieRental","state","openModal","currentItem","loggedIn","userData","orderDone","addUserHandler","id","name","email_id","data","FormData","append","post","then","resp","inserted","newState","points","setState","catch","err","console","log","loginHandler","provider","auth","GoogleAuthProvider","signInWithPopup","result","token","credential","accessToken","user","uid","displayName","email","error","logoutHandler","signOut","authStateChanged","onAuthStateChanged","getUserHandler","get","getMoviesHandler","items","modalClosed","rentOutHandler","item","alert","orderDoneHandler","length","forEach","index","object","splice","componentDidMount","render","searchClasses","push","moviesList","bind","rentList"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport styles from './MovieRental.module.css';\nimport axios from 'axios';\nimport Header from '../../components/Header/Header';\nimport Movies from '../../components/Movies/Movies';\nimport Rent from '../../components/Rent/Rent';\nimport Modal from '../../components/UI/Modal/Modal';\nimport firebase from '../../Firebase';\n\nclass MovieRental extends Component {\n\n    state = {\n        \n        openModal: false,\n        currentItem: {},\n        loggedIn: false,\n        userData: {},\n        orderDone: false\n    }\n\n    addUserHandler = (id,name,email_id) => {\n\n        var data = new FormData();\n        data.append('id', id);\n        data.append('name', name);\n        data.append('email_id', email_id);\n\n        axios.post('http://34.230.13.18:8081/v1/users',data)\n          .then((resp) => {\n            if(resp.data.inserted === 1){\n\n                let newState = {...this.state};\n                newState.loggedIn = true;\n                newState.userData = {\n                  id: id,\n                  name: name,\n                  email_id: email_id,\n                  points: 0\n                }\n                this.setState(newState);\n\n            }else{\n\n                const data = resp.data.data[0];\n                let newState = {...this.state};\n                newState.loggedIn = true;\n                newState.userData = {\n                  id: data.id,\n                  name: data.name,\n                  email_id: data.email_id,\n                  points: data.points\n                }\n                this.setState(newState);\n\n\n            }\n\n          })\n          .catch((err) => {\n            console.log(err);\n\n          });\n\n    }\n\n\n    loginHandler = () =>{\n      const state = this;\n\n      let provider = new firebase.auth.GoogleAuthProvider();\n\n      firebase.auth().signInWithPopup(provider).then(function(result) {\n        \n        const token = result.credential.accessToken;\n        const user = result.user;\n        const id = user.uid;\n        const name = user.displayName;\n        const email_id = user.email;\n        state.addUserHandler(id,name,email_id);\n        state.setState({loggedIn:true});\n        ;\n        // ...\n      }).catch(function(error) {\n          console.log(error);\n      });\n    }\n\n    logoutHandler = () => {\n\n        const state = this;\n\n        firebase.auth().signOut().then(function() {\n\n          console.log(\"Logged Out\");\n          state.setState(\n            {\n              loggedIn:false,\n              userData:{}\n            }\n            );\n          // Sign-out successful.\n        }, function(error) {\n          console.log(error);\n          // An error happened.\n        });\n        \n\n    }\n\n    authStateChanged = () => {\n        const state = this;\n\n          firebase.auth().onAuthStateChanged(function(user) {\n            if(user){\n              state.setState({loggedIn:true});\n              state.getUserHandler(user.uid);\n            \n            }else{\n              state.setState({loggedIn:false});\n              console.log(\"Not logged in\")\n              \n            }\n\n        });\n\n    }\n\n\n    componentDidMount(){\n        \n        this.getMoviesHandler();\n        //this.logoutHandler();\n        this.authStateChanged();\n        this.setState({orderDone: false});\n          \n      }\n\n      getUserHandler = (id) =>{\n\n          axios.get('http://34.230.13.18:8081/v1/user/'+id)\n          .then((resp) => {\n\n              this.setState({userData: resp.data[0]});\n\n          })\n          .catch((err) => {\n            console.log(err);\n          });\n\n\n      }\n\n\n      getMoviesHandler = () => {\n\n          axios.get('http://34.230.13.18:8081/v1/movies')\n          .then((resp) => {\n            this.setState({items: resp.data});\n          })\n          .catch((err) => {\n            console.log(err);\n          });\n\n      }\n\n\n      modalClosed = () => {\n\n        console.log(\"modalClosed\");\n        let newState = {...this.state};\n        newState.openModal = false;\n        this.setState(newState);\n        this.getUserHandler(this.state.userData.id);\n\n      }\n\n      rentOutHandler = (item)=>{\n\n        let newState = {...this.state};\n\n        if(!newState.loggedIn){\n\n          alert(\"Please Login\")\n\n        }else{\n          newState.openModal = true;\n          newState.currentItem = item;\n          console.log(newState);\n          this.setState(newState);\n        }\n\n        \n      }\n\n      orderDoneHandler = (id) => {\n\n          let newState = {...this.state};\n          let items = newState.items.data;\n          console.log(items.length);\n          items.forEach((item,index, object)=>{\n                \n                if(item.id === id){\n                  object.splice(index, 1);\n                }\n\n          });\n          newState.items.data = items;\n          newState.orderDone = true;\n\n\n\n          this.setState(newState);\n\n\n      }\n\n\n\n    \n    render (){\n\n        let searchClasses = [];\n        searchClasses.push(\"fa\");\n        searchClasses.push(\"fa-search\");\n\n        /*let moviesList = <Movies \n                            clicked={this.rentOutHandler.bind(this)}\n                            items={this.state.items}\n                          />;*/\n\n        if(this.state.orderDone){\n            moviesList = <Movies \n                      clicked={this.rentOutHandler.bind(this)}\n                      items={this.state.items}\n                    />;\n        }\n        \n        let rentList = \"\";\n\n        if(this.state.openModal ){\n          rentList = <Rent \n                        item={this.state.currentItem}\n                        closeModalClicked={this.modalClosed}\n                        orderDoneClicked={this.orderDoneHandler}\n                        userData={this.state.userData}\n                      />;   \n\n        }\n\n        return (\n            <div>\n            <Header \n                loggedIn={this.state.loggedIn}\n                name = {this.state.userData.name}\n                logoutClicked={this.logoutHandler}\n                loginClicked={this.loginHandler}/>\n            <Modal\n                show={this.state.openModal}\n                modalClosed={this.modalClosed}\n            >\n              {rentList}\n            </Modal>\n              {moviesList}\n            </div>\n           \n            \n\n        )\n\n    }\n\n}\n\nexport default MovieRental;"]},"metadata":{},"sourceType":"module"}